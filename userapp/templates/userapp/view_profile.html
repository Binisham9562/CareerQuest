{% extends 'userapp/base.html' %}

{% load static %}

{% block title %}Profile - CareerQuest{% endblock %}
{% block nav_links %}
    <a href="/home/" class="px-3">Home</a>
    <a href="/jobseeker_dashboard" class="px-3">Dashboard</a>
    <button id="edit-toggle" class="btn edit-btn" style="background-color: #0a0db8; color: white;">Edit</button>
    <a href="/logout/" class="btn btn-outline-danger px-4 py-2 ms-3">Logout</a>
{% endblock %}

{% block head2 %}
{% endblock %}

{% block content %}
<style>
    .container {
    max-width: 1200px;
    margin-top: 20px;
    display: flex;
    justify-content: space-between;
    gap: 0px;
   
}
.profile-header {
    display: flex;
    align-items: center;
    gap: 20px;
    margin-bottom: 40px;
    justify-content: space-between;
    
}
.profile-header img {
    width: 150px;
    height: 150px;
    object-fit: cover;
    border-radius: 50%;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
}
.profile-header h2 {
    font-size: 32px;
    color: #2A3D72;
    font-weight: bold;
    margin-bottom: 5px;
}
.profile-header p {
    font-size: 16px;
    color: #555;
}
.profile-header .edit-btn {
    background-color: #dd58ac;
    color: white;
    border: none;
    padding: 10px 20px;
    border-radius: 50px;
    cursor: pointer;
    transition: background-color 0.3s ease;
}
.profile-header .edit-btn:hover {
    background-color: #2A3D72;
}
.sidebar {
    flex-basis: 25%;
    background-color: #ffffff;
    padding: 40px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    border-radius: 8px;
    height: 160vh;
    border-right: 1px solid #f1f1f1;
    margin-top: 100px; 
}
.sidebar h4 {
    color: #dd58ac;
    font-weight: bold;
    margin-bottom: 20px;
}
.sidebar a {
    display: block;
    color: #0baa41;
    margin-bottom: 15px;
    text-decoration: none;
    font-size: 16px;
}
 .sidebar a:hover {
    text-decoration:underline;
} 
.profile-content {
    flex-basis:75%;
    padding: 40px;
    background-color: #ffffff;
    border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}
.section-title {
    color: #2A3D72;
    font-size: 24px;
    font-weight: bold;
    margin-bottom: 20px;
    border-bottom: 2px solid #f1f1f1;
    padding-bottom: 10px;
    display: flex;
    justify-content: space-between;
    align-items: center;
}
.section-content {
    font-size: 16px;
    color: #555;
    line-height: 1.6;
}
.btn-outline {
    border-radius: 50px;
    font-weight: bold;
    transition: all 0.3s ease;
    margin-top: 20px;
}
.btn-outline:hover {
    background-color: #2A3D72;
    color: #fff;
}
</style>

<div class="container" >

    <!-- Sidebar for Navigation -->
    <div class="sidebar">
        <div class="profile-header">
             <img src="{% if profile.profile_picture %}{{ profile.profile_picture.url }}{% else %}https://via.placeholder.com/150{% endif %}" alt="Profile Picture"> 
            
        </div>
        <a href="{% url 'update_profile_picture' %}" class="btn edit-section-btn" style="display:none;background-color:  #1861bf; color: white; font-size: 14px;">Update Pic</a>
        <h4>Navigation</h4>
        <a href="#about-me">About Me</a>
        <a href="#skills">Skills</a>
        <a href="#experience">Experience</a>
        <a href="#qualification">Qualification</a>
        <a href="#job-preferences">Job Preferences</a>
        <a href="#resume">Resume</a>
        <a href="#links">Links</a> <!-- Added Links section -->
    </div>

    <!-- Profile Content Section -->
    <div class="profile-content" style="margin-top: 100px;">

        <!-- Profile Header with Edit Button -->
        <div class="profile-header">
            <div>
                <h2>{{ User.firstname }}</h2>
                <p>{{ profile.job_title }}</p>
            </div>
        </div>

        <!-- About Me Section -->
        <div id="about-me">
            <div class="section-title">
                About Me
                <a href="{% url 'edit_about_me' %}" class="btn edit-section-btn" style="display:none;background-color:  #1861bf; color: white; font-size: 14px;">Edit</a>
            </div>
            <div class="section-content">
                <p>{{ profile.about_me }}</p>
            </div>
        </div>

        <!-- Skills Section -->
        <div id="skills">
            <div class="section-title">
                Skills
                <a href="{% url 'edit_skills' %}" class="btn edit-section-btn" style="display: none; background-color: #1861bf; color: white; font-size: 14px;">Edit</a>
            </div>
            <div class="section-content">
                <p>{{ profile.skills }}</p>
            </div>
        </div>

        <!-- Experience Section -->
        <div id="experience">
            <div class="section-title">
                Experience
                <a href="{% url 'edit_experience' %}" class="btn edit-section-btn" style="display: none; background-color: #1861bf; color: white; font-size: 14px;">Edit</a>
            </div>
            <div class="section-content">
                <p>{{ profile.experience }}</p>
            </div>
        </div>

        <!-- Qualification Section -->
        <div id="qualification">
            <div class="section-title">
                Qualification
                <a href="{% url 'edit_qualification' %}" class="btnedit-section-btn" style="display: none; background-color: #1861bf; color: white; font-size: 14px;">Edit</a>
            </div>
            <div class="section-content">
                <p>{{ profile.qualification }}</p>
            </div>
        </div> 
        <!-- <div id="experience"></div>
            <div class="section-title">
                Qualification
                <a href="{% url 'edit_experience' %}" class="btn edit-section-btn" style="display: none; background-color: #1861bf; color: white; font-size: 14px;">Edit</a>
            </div>
            <div class="section-content">
                <p>{{ profile.qualification }}</p>
            </div>
        </div> -->
        <!-- Job Preferences Section -->
        <div id="job-preferences">
            <div class="section-title">
                Job Preferences
                <a href="{% url 'edit_job_preferences' %}" class="btn edit-section-btn" style="display: none; background-color: #1861bf; color: white; font-size: 14px;">Edit</a>
            </div>
            <div class="section-content">
                <p><strong>Preferred Job:</strong> {{ profile.job_preferences }}</p>
                <p><strong>Preferred Location:</strong> {{ profile.preferred_location }}</p>
            </div>
        </div>

        <!-- Resume Section -->
        <div id="resume">
            <div class="section-title">
                Resume
                <a href="{% url 'edit_resume' %}" class="btn edit-section-btn" style="display: none; background-color: #1861bf; color: white; font-size: 14px;">Edit</a>
            </div>
            <div class="section-content">
                {% if profile.resume %}
                <p><strong>Resume:</strong> <a href="{{ profile.resume.url }}" class="btn btn-outline-dark" target="_blank">Download Resume</a></p>
                {% else %}
                    <p>No resume uploaded.</p>
                {% endif %}
            </div>
        </div>

        <!-- Links Section (GitHub, LinkedIn) -->
        <div id="links">
            <div class="section-title">
                Links
            </div>
            <div class="section-content">
                <p><strong>GitHub:</strong> 
                    {% if profile.github_link %}
                        <a href="{{ profile.github_link }}" class="btn btn-outline-dark" target="_blank">Visit</a>
                    {% else %}
                        No GitHub link available.
                    {% endif %}
                </p>
                <p><strong>LinkedIn:</strong> 
                    {% if profile.linkedin_link %}
                        <a href="{{ profile.linkedin_link }}" class="btn btn-outline-info" target="_blank">Visit</a>
                    {% else %}
                        No LinkedIn link available.
                    {% endif %}
                </p>
            </div>
        </div>

    </div>

</div>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        $(document).ready(function() {
            $('#edit-toggle').click(function() {
                $('.edit-section-btn').toggle(); // Toggle visibility of all section-specific Edit buttons
            });
        });
    </script>

{% endblock %}
